<!-- https://database422.web.app/ -->
<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>DataBase</title>
</head>
<body>
    <h1>Elysian</h1>
    <input type = "text" placeholder = "ID" id = "IDField">
    <input type = "text" placeholder = "Name" id = "NameField">
    <input type = "text" placeholder = "Stock" id = "StockField">
    <button onclick = "writeData()">Submit</button>
    <button onclick = "getData()">Refresh</button>
    <hr>
    <table style = "width:100%" id = "table">
        <tr>
            <th>Item ID</th>
            <th>Item Name</th>
            <th>Item Stock</th>
        </tr>
    </table>
    <div id = "Data"></div>
    
    <script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-database.js"></script>
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCFBARoIeJwMX1QCkHNlSX8mJZ4FHCdVww",
            authDomain: "elysian-9d3e5.firebaseapp.com",
            projectId: "elysian-9d3e5",
            storageBucket: "elysian-9d3e5.appspot.com",
            messagingSenderId: "337046394806",
            appId: "1:337046394806:web:a8e38df1cf3b6fee96d317",
            measurementId: "G-77CJ8QL6Y9"
        };
        firebase.initializeApp(firebaseConfig);

        var database = firebase.database();
        var show = document.getElementById('Data');
        var table = document.getElementById("table");
        window.onload = getData();
        
        function writeData() {
            database.ref(document.getElementById("IDField").value).set({
                ID: document.getElementById("IDField").value,
                Name: document.getElementById("NameField").value,
                Stock: document.getElementById("StockField").value
            });
            getData();
        }
        function getData() {
            database.ref('/').on("value", function(snapshot) {
                for (var i = table.rows.length - 1; i > 0; i--) {
                    table.deleteRow(i);
                }
                snapshot.forEach(function(userSnapshot) {
                    var userKey = userSnapshot.key;
                    var userData = userSnapshot.val();
                    var newRow = table.insertRow(table.length);
                    var cell = newRow.insertCell(0);
                    cell.innerHTML = userData['ID'];
                    var cell = newRow.insertCell(1);
                    cell.innerHTML = userData['Name'];
                    var cell = newRow.insertCell(2);
                    cell.innerHTML = userData['Stock'];
                })
            });
        }
    </script>
</body>